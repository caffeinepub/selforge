{
  "kind": "build_request",
  "title": "Fix hold-to-terminate to 3s, add settings menu, expand onboarding, clean dashboard",
  "projectName": "AXIOM",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the hold-to-terminate duration in Protocol Mode from 3 minutes (180 seconds) to 3 seconds. The long-press gesture in ProtocolMode.tsx must complete and fire after exactly 3 seconds of continuous holding.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "in termination i said 3 seconds not 3 minutes"
        ]
      },
      "acceptanceCriteria": [
        "The useLongPress hook (or equivalent) is configured with a duration of 3000ms (3 seconds) for the terminate action in ProtocolMode.tsx",
        "Holding the button for 3 seconds completes the circular progress and triggers session termination",
        "Releasing before 3 seconds resets the progress indicator without terminating"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Expand the onboarding screen (OnboardingGate.tsx) to collect name, age, and gender from the user before they access the app. The existing name field must remain; add an age input (numeric) and a gender selector (options: Male, Female, Other, Prefer not to say). Persist all three values in the Zustand store.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "in starting ask gender and age with name"
        ]
      },
      "acceptanceCriteria": [
        "Onboarding screen shows name, age, and gender fields before the user can proceed",
        "Age field accepts numeric input only",
        "Gender field offers at least: Male, Female, Other, Prefer not to say",
        "All three values (name, age, gender) are saved to the Zustand persisted store on completion",
        "Onboarding is only shown once; returning users skip directly to the main app"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add a Settings page (or accessible settings menu) reachable from the app (e.g., a gear/settings icon in the Dashboard header or BottomNav). The settings screen must include: (1) Profile editing — name, age, gender; (2) Streak history — a read-only list/timeline of past streak records from the Zustand store; (3) Any other relevant profile/preference fields already tracked in the store (e.g., accent color, OLED mode). Persist all edits back to the Zustand store.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "add setting menu where i can see streaks history change name age gender and other things"
        ]
      },
      "acceptanceCriteria": [
        "A settings entry point (icon or tab) is visible and tappable from the main app UI",
        "Settings screen has a Profile section with editable name, age, and gender fields with a save action",
        "Settings screen has a Streak History section showing past streaks (date range and length) in a scrollable list",
        "Changes to profile fields are persisted in the Zustand store immediately on save",
        "Settings screen follows the existing OLED dark theme and accent color system"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Remove any 'Made from Caffeine.ai' (or similar branding) text from the Dashboard page (Dashboard.tsx) and any other visible location in the UI.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "remove text made from caffeine.ai from dashboard"
        ]
      },
      "acceptanceCriteria": [
        "No 'Made from Caffeine.ai', 'Caffeine.ai', or similar attribution text is visible anywhere on the Dashboard",
        "No such text appears on any other page in the app"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Update the Zustand store (store.ts) to add persisted fields for age (number) and gender (string) on the user profile, and add a streakHistory array that records each completed streak with its start date, end date, and length in days.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "change name age gender",
          "streaks history"
        ]
      },
      "acceptanceCriteria": [
        "Store state includes age and gender fields with appropriate types",
        "Store state includes a streakHistory array with entries containing start date, end date, and streak length",
        "setAge, setGender, and addStreakHistory (or equivalent) actions are exposed from the store",
        "Fields are persisted via the existing localStorage/persist middleware"
      ]
    }
  ],
  "constraints": [
    "Do not modify files under frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or frontend/src/components/ui",
    "All state must remain in the existing Zustand store — do not introduce a new state management library",
    "Settings screen must match the existing OLED dark theme and neon accent color system"
  ],
  "nonGoals": [
    "Backend schema changes — all profile and streak data stays in Zustand (local persistence only)",
    "Authentication or user accounts",
    "Cloud sync of user profile or streak data",
    "Any redesign of existing pages beyond the specific changes listed"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}